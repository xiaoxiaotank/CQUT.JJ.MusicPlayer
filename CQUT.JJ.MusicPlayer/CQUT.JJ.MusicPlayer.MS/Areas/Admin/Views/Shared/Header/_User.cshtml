@using CQUT.JJ.MusicPlayer.Core.Models
@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json;
@{
    var jsonValue = Context.Session.GetString("User");
    var user = jsonValue != null ? JsonConvert.DeserializeObject<UserModel>(jsonValue) : default(UserModel);
}

@if (user != null)
{
    <!-- 用户帐户菜单 -->
    <li class="dropdown user user-menu">
        <!-- 菜单切换按钮 -->
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <!-- 导航栏里的用户头像 -->
            <img src="~/resource/admin/index/user-160x160.jpg" class="user-image" alt="User Image">
            <!-- hidden-xs hides the username on small devices so only the image appears. -->
            <span>@user.UserName</span>
        </a>
        <ul class="dropdown-menu">
            <!-- 菜单里面的用户头像 -->
            <li class="user-header">
                <img src="~/resource/admin/index/user-160x160.jpg" class="img-circle" alt="User Image">
                <p>
                    @user.UserName
                    <small>创建于 @user.CreationTime.ToString("yyyy年MM月dd日")</small>
                </p>
            </li>
            @*<!-- 菜单体 -->
            <li class="user-body">
                <div class="row">
                    <div class="col-xs-4 text-center">
                        <a href="#">Followers</a>
                    </div>
                    <div class="col-xs-4 text-center">
                        <a href="#">Sales</a>
                    </div>
                    <div class="col-xs-4 text-center">
                        <a href="#">Friends</a>
                    </div>
                </div>
                <!-- /.row -->
            </li>*@
            <!-- 菜单脚 -->
            <li class="user-footer">
                @*<div class="pull-left">
                    <a href="#" class="btn btn-default btn-flat">Profile</a>
                </div>*@
                <div class="pull-right">
                    @Html.ActionLink("注销", "Logout", "Account", null, new { @class = "btn btn-default btn-flat" })
                </div>
            </li>
        </ul>
    </li>

}
